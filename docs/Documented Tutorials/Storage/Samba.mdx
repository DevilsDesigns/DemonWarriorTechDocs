---
title: Setting Up Samba Shares
description: Complete guide to setting up SMB/Samba file shares on Windows and integrating with Nextcloud for network storage access
sidebar_position: 2
toc_min_heading_level: 2
toc_max_heading_level: 6
tags: [samba, smb, file-sharing, windows, nextcloud, network-storage, tutorial, storage]
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import BuyMeACoffeeButton from '@site/src/components/BuyMeACoffeeButton';

## Samba Setup

<Tabs>
  <TabItem value="Setting up a SMB/Samba Share on Windows" label="Setting up a SMB/Samba Share on Windows" default>

**Setting up a SMB/Samba Share on Windows:**

:::caution
**NOTE YOU WILL NEED A LOCAL WINDOWS USER THIS WILL NOT WORK WITH A EMAIL LOGIN TO WINDOWS**
:::

HERES A TUTORIAL IF YOU WANT

[How to Change Windows Email to Local User](https://support.microsoft.com/en-us/windows/switch-from-a-local-account-to-a-microsoft-account-395203bf-9f1b-eb24-b042-5b8dae6c1d20)

1. Go to this PC and right click the drive you want and select Properties

![image](https://user-images.githubusercontent.com/35183970/217380639-e59578b8-de8b-44fc-a408-13f6ce6a45fe.png)

2. Go to the sharing tab and click share

![image](https://user-images.githubusercontent.com/35183970/217380867-ff952fa2-afb9-43ac-bfe5-471719cac3c1.png)

3. Then click on advanced sharing 

![image](https://user-images.githubusercontent.com/35183970/217381079-b0b4a53b-e774-4fd4-8b46-f0ca2385d975.png)

4. Name the Share whatever you would like it to be

![image](https://user-images.githubusercontent.com/35183970/217381130-9f6c70ec-478c-477d-bf5e-325da3834bf2.png)

5. Click on permission and add a couple of users to this share

6. Add Network Service, Local Service, Guests 

![image](https://user-images.githubusercontent.com/35183970/217381307-96ad0a9f-7779-4c77-bd66-65bd4ed1106d.png)

7. To do this click Add and select the advanced on the bottom

![image](https://user-images.githubusercontent.com/35183970/217381503-54187fd4-d5df-46cc-9a6c-752b7d129960.png)

8. Click Find Now

![image](https://user-images.githubusercontent.com/35183970/217381574-9f0a8fd3-ff84-44c9-81f5-87219c7749b5.png)

9. Select the 3 accounts from step 6 and add them to your permissions

![image](https://user-images.githubusercontent.com/35183970/217381726-149ba3b6-3aa3-4ecd-8500-272d7e3786d2.png)

10. Then Click Ok

![image](https://user-images.githubusercontent.com/35183970/217381826-637e9162-1fa7-488d-a618-2d31bbaab9c2.png)

11. Then Click Allow all on the 3 added account permissions

![image](https://user-images.githubusercontent.com/35183970/217381913-e8759158-54d1-47aa-9dca-14e458dbb561.png)

12. Test to see if it works grab another windows PC or on your phone through a Samba client and type your internal ip of your samba share pc

my internal ip of my pc is `192.168.1.111`
so i type into my folder search bar `\\192.168.1.111` if you see your share your all set.

![image](https://user-images.githubusercontent.com/35183970/217382207-02a5e92f-4d34-4979-8a52-64c3c9501168.png)

  </TabItem>
  <TabItem value="Nextcloud Setting up SMB/Samba Share" label="Nextcloud Setting up SMB/Samba Share" default>

**Nextcloud Setting up SMB/Samba Share:**
1. Login in as Adminstrator
2. Click on Apps

![image](https://user-images.githubusercontent.com/35183970/217377973-569dd46c-a184-46c6-905a-5ada046d487c.png)

3. Enable External Storage and SMB Connection Test

![image](https://user-images.githubusercontent.com/35183970/217378197-d674308d-43ad-45c7-a059-b5edcbf4de3b.png)

![image](https://user-images.githubusercontent.com/35183970/217378244-35175574-2c91-498a-859b-44704f686272.png)

4. Go into your docker-desktop and click on your nextcloud container and select the three dots where your nextcloud instance is shown and select terminal

![image](https://user-images.githubusercontent.com/35183970/217378487-1a77d05e-1d6e-49f4-b1ae-2ca4f60ba206.png)

5. Run the Following commands in terminal

```css
apt update
```

```css
apt upgrade
```

```css
apt install nano
```

```css
apt install smbclient
```

```css
apt install smbclient libsmbclient-dev
```

![image](https://user-images.githubusercontent.com/35183970/217380082-d2057369-d7dc-4eba-9f95-b729196bbfb5.png)

5. Click on Administrative Settings

6. Under Adminstration select smb test

7. Type like below

Hostname: 192.168.1.111 (THIS WILL BE YOUR INTERNAL PC's IP)
User: DemonWarrior (THIS WILL BE YOUR WINDOWS LOCAL USER)
Workgroup: Workgroup
Password: @@@@@@@ (THIS WILL BE YOUR WINDOWS LOCAL USER PASSWORD)
Share: Jellyfin-Media (THIS WILL BE WHAT YOU NAMED YOUR SAMBA SHARE IN STEP 4 OF CREATING YOUR SAMBA SHARE)

![image](https://user-images.githubusercontent.com/35183970/217377872-2c342a7f-6e43-4c5c-9cd2-680eeb39fe92.png)

8. Once you have succesfully loaded your Samba Test go to Adminstration ---> External Storage

Copy the settings from your Samba test to your external storage it should read.

![image](https://user-images.githubusercontent.com/35183970/217383771-6214b1c7-2864-42e2-a177-1dace4afc9b5.png)

  </TabItem>
</Tabs>

<BuyMeACoffeeButton />