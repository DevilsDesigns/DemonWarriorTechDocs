---
title: Installing Caddy on Linux
description: Complete professional guide to installing and configuring Caddy web server on Linux systems with automatic HTTPS, reverse proxy setup, and best practices
sidebar_position: 2
toc_min_heading_level: 2
toc_max_heading_level: 6
tags: [caddy, linux, installation, web-server, https, reverse-proxy, tutorial, ssl, automation, systemd]
---

import BuyMeACoffeeButton from '@site/src/components/BuyMeACoffeeButton';

## Overview

Caddy is a powerful, enterprise-ready web server with automatic HTTPS that makes serving your sites easy. This comprehensive guide will walk you through installing Caddy on Linux systems with proper security configurations, systemd integration, and best practices.

## Prerequisites

Before beginning the installation, ensure your system meets the following requirements:

### System Requirements
- **Operating System**: Linux distribution (Ubuntu 18.04+, Debian 9+, CentOS 7+, RHEL 7+, or equivalent)
- **Architecture**: x86_64 (amd64) or ARM64
- **RAM**: Minimum 512MB (1GB+ recommended for production)
- **Disk Space**: At least 100MB free space
- **Network**: Internet connection for downloading packages and certificates

### Required Permissions
- **Root or sudo access** for system-level installation
- **Port access**: Ability to bind to ports 80 and 443
- **Firewall configuration** permissions

### Network Requirements
- **Ports 80 and 443** must be accessible from the internet
- **Domain name** pointing to your server's public IP (for HTTPS)
- **Router/firewall** configured to forward traffic

## Installation Methods

### Method 1: Official Package Repository (Recommended)

This is the recommended method as it provides automatic updates and proper system integration.

#### Step 1: Add Caddy Repository

```bash
# Install required packages
sudo apt update
sudo apt install -y debian-keyring debian-archive-keyring apt-transport-https

# Add Caddy's official GPG key
curl -1sLf 'https://dl.cloudsmith.io/public/caddy/stable/gpg.key' | sudo gpg --dearmor -o /usr/share/keyrings/caddy-stable-archive-keyring.gpg

# Add Caddy repository
curl -1sLf 'https://dl.cloudsmith.io/public/caddy/stable/debian.deb.txt' | sudo tee /etc/apt/sources.list.d/caddy-stable.list
```

#### Step 2: Install Caddy

```bash
# Update package list
sudo apt update

# Install Caddy
sudo apt install caddy
```

#### Step 3: Verify Installation

```bash
# Check Caddy version
caddy version

# Verify service status
sudo systemctl status caddy
```

### Method 2: Custom Build with Plugins

If you need specific plugins (like Cloudflare DNS or DuckDNS), use this method.

#### Step 1: Check System Information

First, identify your system architecture and distribution:

```bash
# Check OS distribution and version
lsb_release -a

# Check system architecture
uname -m

# Check available memory
free -h
```

**Example output for Ubuntu 24.04:**
```
Distributor ID: Ubuntu
Description:    Ubuntu 24.04 LTS
Release:        24.04
Codename:       noble
```

#### Step 2: Download Custom Caddy Build

:::info
**Plugin Selection**: Before downloading, select the plugins you need. Common plugins include:
- **Cloudflare DNS**: For automatic DNS-01 challenge with Cloudflare
- **DuckDNS**: For dynamic DNS with DuckDNS service
- **Route53**: For AWS Route53 DNS management
:::

1. **Visit the Caddy Download Page**: [Caddy Download Builder](https://caddyserver.com/download)

2. **Select Required Plugins**:
   - For Cloudflare: `github.com/caddy-dns/cloudflare`
   - For DuckDNS: `github.com/caddy-dns/duckdns`

3. **Download the Custom Build**:
   ```bash
   # Navigate to downloads directory
   cd ~/Downloads
   
   # Download using wget (replace URL with your custom build URL)
   wget "https://caddyserver.com/api/download?os=linux&arch=amd64&p=github.com%2Fcaddy-dns%2Fcloudflare&p=github.com%2Fcaddy-dns%2Fduckdns" -O caddy
   ```

#### Step 3: Install the Binary

1. **Make the binary executable**:
   ```bash
   chmod +x caddy
   ```

2. **Verify the binary**:
   ```bash
   # Check if the binary works
   ./caddy version
   
   # Verify plugins are included
   ./caddy list-modules | grep dns
   ```

3. **Install to system location**:
   ```bash
   # Copy to system binary directory
   sudo cp caddy /usr/bin/caddy
   
   # Verify system installation
   caddy version
   ```

**Expected output:**
```
v2.7.6 h1:w0NymbG2m9PcvKWsrXO6EEkY9Ru4FJK8uQbYcev1p3A=
```

## System Configuration

### Step 4: Create System User and Group

For security best practices, Caddy should run as a dedicated system user with minimal privileges.

1. **Create the caddy system group**:
   ```bash
   sudo groupadd --system caddy
   ```

2. **Create the caddy system user**:
   ```bash
   sudo useradd --system \
       --gid caddy \
       --create-home \
       --home-dir /var/lib/caddy \
       --shell /usr/sbin/nologin \
       --comment "Caddy web server" \
       caddy
   ```

   **Explanation of parameters**:
   - `--system`: Creates a system user (UID < 1000)
   - `--gid caddy`: Assigns user to the caddy group
   - `--create-home`: Creates the home directory
   - `--home-dir /var/lib/caddy`: Sets home directory for data storage
   - `--shell /usr/sbin/nologin`: Prevents interactive login for security
   - `--comment`: Adds descriptive comment

### Step 5: Configure Systemd Service

Create a systemd service file for proper service management and automatic startup.

1. **Create the service file**:
   ```bash
   sudo nano /etc/systemd/system/caddy.service
   ```

2. **Add the following service configuration**:
   ```ini
   [Unit]
   Description=Caddy HTTP/2 web server
   Documentation=https://caddyserver.com/docs/
   After=network.target network-online.target
   Requires=network-online.target

   [Service]
   Type=notify
   User=caddy
   Group=caddy
   ExecStart=/usr/bin/caddy run --environ --config /etc/caddy/Caddyfile
   ExecReload=/usr/bin/caddy reload --config /etc/caddy/Caddyfile --force
   TimeoutStopSec=5s
   LimitNOFILE=1048576
   LimitNPROC=1048576
   PrivateTmp=true
   ProtectSystem=full
   AmbientCapabilities=CAP_NET_ADMIN CAP_NET_BIND_SERVICE
   NoNewPrivileges=true
   RestartPreventExitStatus=1
   Restart=on-failure
   RestartSec=5s

   [Install]
   WantedBy=multi-user.target
   ```

   **Key service features**:
   - **Security**: Runs as non-root user with minimal capabilities
   - **Automatic restart**: Restarts on failure (except exit code 1)
   - **Resource limits**: Prevents resource exhaustion
   - **Network capabilities**: Can bind to privileged ports (80, 443)

### Step 6: Create Configuration Directory

1. **Create the Caddy configuration directory**:
   ```bash
   sudo mkdir -p /etc/caddy
   ```

2. **Set proper ownership and permissions**:
   ```bash
   sudo chown -R root:caddy /etc/caddy
   sudo chmod 755 /etc/caddy
   ```

3. **Create data directory for certificates and cache**:
   ```bash
   sudo mkdir -p /var/lib/caddy
   sudo chown caddy:caddy /var/lib/caddy
   sudo chmod 755 /var/lib/caddy
   ```

### Step 7: Create Initial Caddyfile

1. **Create the main configuration file**:
   ```bash
   sudo nano /etc/caddy/Caddyfile
   ```

2. **Add a basic configuration** (replace with your domain):
   ```caddyfile
   # Basic example - replace with your domain
   example.com {
       respond "Hello, World!"
   }
   
   # Reverse proxy example
   # app.example.com {
   #     reverse_proxy localhost:3000
   # }
   ```

3. **Set proper permissions**:
   ```bash
   sudo chown root:caddy /etc/caddy/Caddyfile
   sudo chmod 644 /etc/caddy/Caddyfile
   ```

:::tip
**Configuration Examples**: For more advanced configurations, visit our [Caddy Examples](https://docs.demonwarriortech.com/Examples/Caddy_Examples) page.
:::

## Network Configuration

### Step 8: Identify Network Information

Before configuring domains and DNS, identify your network setup:

```bash
# Install network utilities
sudo apt update && sudo apt install -y net-tools curl

# Find your internal IP address
ip addr show | grep 'inet ' | grep -v '127.0.0.1'

# Alternative method
hostname -I

# Find your public IP address
curl -4 ifconfig.me
```

**Example output:**
```
Internal IP: 192.168.1.100
Public IP: 203.0.113.1
```

### Step 9: Configure Firewall

Ensure the necessary ports are open:

```bash
# For Ubuntu/Debian with UFW
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp
sudo ufw reload

# For CentOS/RHEL with firewalld
sudo firewall-cmd --permanent --add-service=http
sudo firewall-cmd --permanent --add-service=https
sudo firewall-cmd --reload

# Verify firewall status
sudo ufw status  # Ubuntu/Debian
sudo firewall-cmd --list-all  # CentOS/RHEL
```

## DNS Configuration

### Option A: DuckDNS Setup (Free Dynamic DNS)

DuckDNS provides free dynamic DNS services, perfect for home servers with changing IP addresses.

#### Step 1: Create DuckDNS Account

1. **Visit [DuckDNS.org](https://www.duckdns.org)** and sign in with:
   - Google Account
   - GitHub Account
   - Reddit Account
   - Twitter Account

2. **Create a subdomain**:
   - Enter your desired subdomain (e.g., `myserver`)
   - Click "Add Domain"
   - Note your token for later use

#### Step 2: Install DuckDNS Client

```bash
# Install required packages
sudo apt install -y curl cron

# Create DuckDNS directory
sudo mkdir -p /opt/duckdns
cd /opt/duckdns

# Download the update script
sudo curl -o duck.sh "https://www.duckdns.org/update?domains=YOURSUBDOMAIN&token=YOURTOKEN&ip="

# Make it executable
sudo chmod +x duck.sh

# Test the script
sudo ./duck.sh
```

#### Step 3: Setup Automatic Updates

```bash
# Edit crontab for automatic updates
sudo crontab -e

# Add this line to update every 5 minutes
*/5 * * * * /opt/duckdns/duck.sh >/dev/null 2>&1
```

### Option B: Cloudflare DNS (Recommended for Production)

For production environments, Cloudflare provides robust DNS services with API integration.

1. **Add your domain to Cloudflare**
2. **Create an API token** with Zone:Edit permissions
3. **Configure Caddy with Cloudflare plugin** (if using custom build)

## Service Management

### Step 10: Start and Enable Caddy

1. **Reload systemd configuration**:
   ```bash
   sudo systemctl daemon-reload
   ```

2. **Enable and start Caddy service**:
   ```bash
   sudo systemctl enable --now caddy
   ```

3. **Verify service status**:
   ```bash
   sudo systemctl status caddy
   ```

**Expected output:**
```
● caddy.service - Caddy HTTP/2 web server
     Loaded: loaded (/etc/systemd/system/caddy.service; enabled; vendor preset: enabled)
     Active: active (running) since Mon 2024-01-15 10:30:00 UTC; 5s ago
```

### Step 11: Verify Installation

1. **Test configuration syntax**:
   ```bash
   sudo caddy validate --config /etc/caddy/Caddyfile
   ```

2. **Check if Caddy is listening on ports**:
   ```bash
   sudo netstat -tlnp | grep caddy
   ```

3. **Test HTTP response** (replace with your domain):
   ```bash
   curl -I http://your-domain.com
   ```

## Service Management Commands

### Essential Commands

```bash
# Check service status
sudo systemctl status caddy

# Start the service
sudo systemctl start caddy

# Stop the service
sudo systemctl stop caddy

# Restart the service
sudo systemctl restart caddy

# Reload configuration without stopping
sudo systemctl reload caddy

# Enable auto-start on boot
sudo systemctl enable caddy

# Disable auto-start on boot
sudo systemctl disable caddy
```

### Logging and Monitoring

```bash
# View recent logs
sudo journalctl -u caddy -n 50

# Follow logs in real-time
sudo journalctl -u caddy -f

# View logs from today
sudo journalctl -u caddy --since today

# View logs with specific priority
sudo journalctl -u caddy -p err
```

### Configuration Management

```bash
# Test configuration before applying
sudo caddy validate --config /etc/caddy/Caddyfile

# Format Caddyfile
sudo caddy fmt --overwrite /etc/caddy/Caddyfile

# Reload configuration
sudo caddy reload --config /etc/caddy/Caddyfile

# View current configuration
sudo caddy config --config /etc/caddy/Caddyfile
```

## Port Configuration

### Router/Firewall Setup

For external access, configure your router to forward traffic:

1. **Access your router's admin panel** (usually `192.168.1.1` or `192.168.0.1`)
2. **Navigate to Port Forwarding** settings
3. **Add port forwarding rules**:
   - **Port 80** (HTTP) → Your server's internal IP
   - **Port 443** (HTTPS) → Your server's internal IP

### Verify Port Accessibility

```bash
# Check if ports are accessible externally
curl -I http://portchecker.co/check?port=80&host=YOUR_PUBLIC_IP
curl -I http://portchecker.co/check?port=443&host=YOUR_PUBLIC_IP

# Alternative: Use online port checker
# Visit: https://portchecker.co/
```

## Troubleshooting

### Common Issues and Solutions

#### Issue 1: Service Won't Start

```bash
# Check service status and logs
sudo systemctl status caddy
sudo journalctl -u caddy -n 20

# Common causes:
# - Configuration syntax errors
# - Permission issues
# - Port conflicts
```

**Solution:**
```bash
# Validate configuration
sudo caddy validate --config /etc/caddy/Caddyfile

# Check file permissions
ls -la /etc/caddy/Caddyfile
sudo chown root:caddy /etc/caddy/Caddyfile
sudo chmod 644 /etc/caddy/Caddyfile
```

#### Issue 2: Certificate Errors

```bash
# Check certificate status
sudo caddy list-certificates

# View certificate-related logs
sudo journalctl -u caddy | grep -i cert
```

**Solution:**
```bash
# Ensure domain points to your server
nslookup your-domain.com

# Check if ports 80 and 443 are accessible
sudo netstat -tlnp | grep :80
sudo netstat -tlnp | grep :443
```

#### Issue 3: Permission Denied Errors

```bash
# Check Caddy user permissions
sudo -u caddy ls -la /var/lib/caddy
```

**Solution:**
```bash
# Fix ownership and permissions
sudo chown -R caddy:caddy /var/lib/caddy
sudo chmod 755 /var/lib/caddy
```

### Debug Mode

For detailed troubleshooting, run Caddy in debug mode:

```bash
# Stop the service
sudo systemctl stop caddy

# Run in debug mode
sudo -u caddy /usr/bin/caddy run --config /etc/caddy/Caddyfile --adapter caddyfile --debug
```

## Security Best Practices

### File Permissions

```bash
# Secure configuration files
sudo chmod 644 /etc/caddy/Caddyfile
sudo chown root:caddy /etc/caddy/Caddyfile

# Secure data directory
sudo chmod 755 /var/lib/caddy
sudo chown caddy:caddy /var/lib/caddy

# Secure binary
sudo chmod 755 /usr/bin/caddy
sudo chown root:root /usr/bin/caddy
```

### Firewall Configuration

```bash
# Enable UFW and configure rules
sudo ufw enable
sudo ufw default deny incoming
sudo ufw default allow outgoing
sudo ufw allow ssh
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp
```

### Regular Updates

```bash
# Update system packages
sudo apt update && sudo apt upgrade -y

# If using package installation, Caddy will update automatically
# For manual installation, check for updates regularly
caddy version
```

## Performance Optimization

### System Limits

Add to `/etc/security/limits.conf`:
```
caddy soft nofile 65536
caddy hard nofile 65536
```

### Systemd Service Optimization

The service file already includes optimizations:
- `LimitNOFILE=1048576`: Increased file descriptor limit
- `LimitNPROC=1048576`: Increased process limit
- `PrivateTmp=true`: Isolated temporary directory
- `ProtectSystem=full`: Read-only system directories

## Backup and Maintenance

### Configuration Backup

```bash
# Create backup directory
sudo mkdir -p /opt/caddy-backup

# Backup configuration
sudo cp /etc/caddy/Caddyfile /opt/caddy-backup/Caddyfile.$(date +%Y%m%d)

# Backup certificates (if needed)
sudo tar -czf /opt/caddy-backup/caddy-data-$(date +%Y%m%d).tar.gz /var/lib/caddy
```

### Automated Backup Script

Create `/opt/caddy-backup/backup.sh`:
```bash
#!/bin/bash
BACKUP_DIR="/opt/caddy-backup"
DATE=$(date +%Y%m%d_%H%M%S)

# Backup configuration
cp /etc/caddy/Caddyfile "$BACKUP_DIR/Caddyfile.$DATE"

# Backup data directory
tar -czf "$BACKUP_DIR/caddy-data-$DATE.tar.gz" /var/lib/caddy

# Keep only last 7 days of backups
find "$BACKUP_DIR" -name "*.tar.gz" -mtime +7 -delete
find "$BACKUP_DIR" -name "Caddyfile.*" -mtime +7 -delete
```

Make it executable and add to cron:
```bash
sudo chmod +x /opt/caddy-backup/backup.sh
sudo crontab -e
# Add: 0 2 * * * /opt/caddy-backup/backup.sh
```

## Next Steps

### Advanced Configuration

1. **Explore advanced directives**: `header`, `encode`, `rate_limit`
2. **Set up monitoring**: Prometheus metrics, health checks
3. **Configure logging**: Custom log formats and rotation
4. **Implement security headers**: HSTS, CSP, X-Frame-Options

### Integration Examples

- **Docker containers**: Reverse proxy to containerized applications
- **Load balancing**: Distribute traffic across multiple backends
- **API gateway**: Route and transform API requests
- **Static sites**: Serve static websites with automatic HTTPS

### Resources

- **Official Documentation**: [caddyserver.com/docs](https://caddyserver.com/docs)
- **Community Forum**: [caddy.community](https://caddy.community)
- **Configuration Examples**: [Caddy Examples](/Examples/Caddy_Examples)

---

## Summary

You have successfully installed Caddy on Linux with:

✅ **Secure installation** with dedicated system user  
✅ **Systemd integration** for service management  
✅ **Automatic HTTPS** capability  
✅ **Proper file permissions** and security  
✅ **Comprehensive logging** and monitoring  
✅ **Production-ready configuration**  

Your Caddy installation is now ready for production use with automatic HTTPS, robust security, and professional service management.

<BuyMeACoffeeButton />
